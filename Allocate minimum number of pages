// Flipkart PhonePe Paytm Amazon Microsoft Google Codenation Uber NPCI

// Binary Search on Answer

class Solution {
    public int findPages(int[] arr, int k) {
        // If more students than books, impossible
        if (k > arr.Length) return -1;

        // The minimum number of pages allocated to a student must be at least the book
        // with maximum number of pages in arr (otherwise that book itself canâ€™t be assigned)
        int low = arr.Max();

        // The maximum number of pages allocated to a student could be the sum of all pages 
        // (all books to a single student)
        int high = arr.Sum();

        int pageNo = -1;
        while(low <= high)
        {
            int mid = low + (high - low) / 2;
            // If allocation possible for pageNo = mid, so we will check whether we can minimize the pageNo to a lesser pageNo or not
            if(CanAllocate(arr, k, mid))
            {
                pageNo = mid;
                high = mid - 1;
            }
            else // else increase pageNo for minimum pageNo
                low = mid + 1;
        }

        return pageNo;
    }
    
    private bool CanAllocate(int[] arr, int k, int mid)
    {
        // studentsCount stores to how many students all pages can be allocated 
        // for a given pageNo = mid
        int studentsCount = 1;
        int currentPageNo = 0;
        foreach(int pageNo in arr)
        {
            // If adding next pageNo, minPagenNo does not exceed then allocate
            // that pageNo to the student
            if(currentPageNo + pageNo <= mid)
            {
                currentPageNo = currentPageNo + pageNo;
            }
            else // else one extra student will be needed, currentPageNo starts from that pageNo
            {
                currentPageNo = pageNo;
                studentsCount++;
            }
        }
        
        // If studentsCount <= k i.e allocation possible for pageNo = mid
        return studentsCount <= k;
    }
}
